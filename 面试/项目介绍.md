# 项目介绍

## 1. 评选通

这个项目主要是一个针对作品进行打分或投票的项目，主要分为运营方、主办方、报送单位以及评委四个角色；采用多租户的形式，通过运营方来管理主办方，每个主办方有自己的报送单位库和评委库；主办方首先会新建评分项目，邀请报送单位并发送短信通知各个单位来上报参评作品，参评作品上报截止后，新建评分单元，调整当前项目下上报作品的分类将其添加到对应的单元中，同时设置轮次以及邀请评委来对上报的作品进行打分和投票，如果是打分的话需要设置打分指标，评委通过每一项指标来对作品进行打分；

项目主要采用微服务架构，分为网关服务、用户服务、短信服务、运营方服务、主办方服务、报送单位服务以及评委服务；

使用nacos作为注册中心及配置中心，gateway作为网关，服务之间使用dubbo来进行通信，同时使用sleuth+zipkin链路追踪来定位出现的问题，使用sentinel来对服务进行降级和限流处理，使用kafka对短信通知操作进行异步处理，使用redis作为缓存，用来缓存一些热点数据，数据存储在mysql中；

前端使用nginx作为静态资源服务器，后端使用内嵌的tomcat；

发布流程为jenkins的流水线操作，根据每一步stage的shell脚本来进行操作，主要是先从gitlab上拉去代码，通过maven根据对应的profiles进行打包，然后使用dockerfile来构建镜像并将镜像推送到harbor中，最后发版到k8s中；

## 2. 评测系统

这个项目主要是一个针对于考证的项目，主要分为管理员、考生、监考老师以及阅卷老师等角色；

管理员来添加每一批培训的考生，然后新建各种类型的考题，比如填空题、单选题、分析题等题型，新建完考题之后进行组卷操作，主要分为手动组卷和条件组卷，条件组卷就是手动设置每种题型以及分数占比，然后通过设置的条件来随机获取考题，生成完考题之后会手动调整试题；组卷完成之后，新建考试将考生以及试卷绑定到该场考试中，考试主要分为线上考试和线下局域网考试两种方式，线上考试就是走互联网可以在自己家考试，局域网考试就是在指定的考点处进行考试，不走网络通信，所有数据都是通过加密文件导入导出的方式操作；新建考试结束会通知考试指定时间登录系统参加考试；

考生首次登录系统会录入信息同时进行实人认证操作，这里的实人认证主要是针对有后面开始考试时候摄像头进行随机抓取比对使用；每场考试可以添加防作弊设置，比如切换屏幕多少次自动交卷，退出全屏交卷、多长时间无操作或者退出系统多长时间后自动交卷；考生考试全程会有录音以及摄像头随机抓拍，通过着一系列操作来防止考生作弊；

考试结束之后会由阅卷老师来进行阅卷处理，通过考试的考生会下发电子证书，证书采用了二维码防伪标识；

这个项目一开是单体项目主要使用技术为springBoot，kafka来合并考生录音以及人像比对和线上监考操作，使用redis来临时保存考生作答信息，使用springSecurity进行认证和授权，同时使用了阿里三方服务短信服务、云存储OSS，实人认证以及视觉平台的人像比对1:1和在线监考；

新加考生自主注册报名功能以及考试流量问题，将项目改为微服务架构`，划分为网关服务、用户服务、培训服务、考卷服务、考试服务以及证书服务；

服务之间同样采用nacos作为注册中心和配置中心，服务间调用方式改为OpenFeign, 同时也引进sleuth+zipkin以及elk对错误进行追踪；